<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/static/css/styles.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Prediction</title>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/battery">Batterie</a></li>
                <li><a href="/ai_prediction">AI Prediction</a></li>
            </ul>
        </nav>
    </header>
    <main id="content">
    <h1>Get Image</h1>
    <img id="ai-image" src="/static/images/ai_first_image.jpg" alt="AI Prediction">
    <h1>â†“</h1>
    <h1>Predict contrast Value</h1>
    <p id="contrast-value"></p>
    </main>

<script>
    const imageElement = document.getElementById('ai-image');
    let lastModified = null;
    async function checkForImageUpdate() {
        try {
            const response = await fetch('/image/last_modified_first');
            if (response.ok) {
                const data = await response.json();
                if (data.last_modified && data.last_modified !== lastModified) {
                    lastModified = data.last_modified;
                    imageElement.src = `/static/images/ai_first_image.jpg?timestamp=${new Date().getTime()}`;
                }
            } else {
                console.error('Failed to fetch last modified timestamp');
            }
        } catch (error) {
            console.error('Error checking for image update:', error);
        }
    }
    async function checkContrastValue() {
        try {
            const response = await fetch('/image/contrast_value');
            if (response.ok) {
                const data = await response.json();
                document.getElementById('contrast-value').textContent = data.contrast_value;
            } else {
                console.error('Failed to fetch contrast value');
            }
        } catch (error) {
            console.error('Error checking contrast value:', error);
        }
    }
    setInterval(checkContrastValue, 500);
    setInterval(checkForImageUpdate, 500);
</script>

    <footer>
        <p>&copy; Jugend forscht 2024/2025</p>
    </footer>
</body>
</html>
